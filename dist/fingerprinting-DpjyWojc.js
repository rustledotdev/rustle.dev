"use strict";function t(t){if(!t||"string"!=typeof t)return t;let s=t.trim();for(;s.startsWith('"')&&s.endsWith('"')||s.startsWith("'")&&s.endsWith("'");)s=s.slice(1,-1).trim();if(s=s.replace(/^["'`„""''«»‹›]+|["'`„""''«»‹›]+$/g,""),s=s.replace(/^\s*["']+\s*|\s*["']+\s*$/g,""),s=s.replace(/^(Translation|Traducción|Traduction|Übersetzung|Traduzione|Tradução|翻译|翻譯|번역|翻訳|Перевод|ترجمة):\s*/i,""),s=s.replace(/^(Here is the translation|The translation is|Translated text):\s*/i,""),s=s.replace(/^(Voici la traduction|La traduction est|Texte traduit):\s*/i,""),s=s.replace(/^(Hier ist die Übersetzung|Die Übersetzung ist|Übersetzter Text):\s*/i,""),s=s.replace(/^(Ecco la traduzione|La traduzione è|Testo tradotto):\s*/i,""),s=s.replace(/^(Aquí está la traducción|La traducción es|Texto traducido):\s*/i,""),s=s.replace(/^\*\*(.*)\*\*$/,"$1"),s=s.replace(/^\*(.*)\*$/,"$1"),s=s.replace(/^`(.*)`$/,"$1"),s=s.replace(/^_(.*?)_$/,"$1"),s=s.replace(/^\{["']?text["']?\s*:\s*["'](.*)["']\}$/i,"$1"),s=s.replace(/^\{["']?translation["']?\s*:\s*["'](.*)["']\}$/i,"$1"),s=s.replace(/\s+/g," ").trim(),s.length>2){const t=[/^"([^"]*)"$/,/^'([^']*)'$/,/^`([^`]*)`$/,/^„([^"]*)"$/,/^«([^»]*)»$/,/^‹([^›]*)›$/,/^"([^"]*)"$/,/^'([^']*)'$/];for(const r of t){const t=s.match(r);if(t&&t[1]){const r=t[1],e=s[0];if(e&&!r.includes(e)){s=r.trim();break}}}}return s=s.replace(/^["'`„""''«»‹›]+|["'`„""''«»‹›]+$/g,"").trim(),s}function s(t){const s=t.trim().toLowerCase().replace(/\s+/g," ");let r=0;for(let e=0;e<s.length;e++){r=(r<<5)-r+s.charCodeAt(e),r&=r}return Math.abs(r).toString(16).padStart(8,"0").substring(0,12)}exports.cleanBatchTranslations=function(s){const r={};for(const[e,i]of Object.entries(s))r[e]=t(i);return r},exports.cleanTranslation=t,exports.cleanTranslationWithContext=function(s,r={}){if(!s)return s;let e=r.isHTML?(i=s)&&"string"==typeof i?i.replace(/>([^<]+)</g,(s,r)=>`>${t(r)}<`):i:t(s);var i;return r.originalText&&r.targetLanguage&&e===r.originalText&&(r.targetLanguage,r.sourceLanguage),e},exports.generateContentFingerprint=s,exports.generateContentHash=function(t){return s(t)},exports.isTranslatableText=function(t){const s=t.trim();return!(s.length<2)&&(!/^[0-9\s\-_.,;:!?()[\]{}]+$/.test(s)&&(!/^[A-Z_][A-Z0-9_]*$/.test(s)&&(!s.startsWith("http")&&(!s.includes("{{")&&!s.includes("${")))))},exports.sanitizeHTML=function(t){return t.replace(/<script[^>]*>.*?<\/script>/gis,"").replace(/<iframe[^>]*>.*?<\/iframe>/gis,"").replace(/<object[^>]*>.*?<\/object>/gis,"").replace(/<embed[^>]*>/gis,"").replace(/on\w+\s*=\s*["'][^"']*["']/gis,"").replace(/javascript:/gis,"").replace(/data:(?!image\/)/gis,"").replace(/<link[^>]*>/gis,"").replace(/<meta[^>]*>/gis,"")};
