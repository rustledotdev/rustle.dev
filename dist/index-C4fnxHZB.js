"use strict";const e=require("fs"),r=require("path"),t=require("./cookies-Dw9bISRk.js");function n(e,r,n={}){const{sourceLanguage:u="en",targetLanguages:a=["es","fr","de","it","pt"]}=n,o=t.getLocaleFromCookie(e);if(o&&a.includes(o))return o;if(r){const e=r.split(",").map(e=>{var r;return null==(r=e.split(";")[0])?void 0:r.trim().split("-")[0]}).filter(e=>e&&a.includes(e));if(e.length>0)return e[0]}return u}function u(e){return t.createServerLocaleCookie(e)}require("./index-CbC6Ie1r.js"),exports.createLocaleMiddleware=function(e={}){const{sourceLanguage:r="en",targetLanguages:t=["es","fr","de","it","pt"],debug:a=!1}=e;return function(e){const a=n(e.headers.get("cookie"),e.headers.get("accept-language"),{sourceLanguage:r,targetLanguages:t});return{locale:a,cookieHeader:u(a)}}},exports.createServerLocaleHeader=u,exports.getServerLocale=n,exports.injectServerTranslations=function(e,r,t={}){if(!r)return e;const{debug:n=!1}=t;let u=e;return u=u.replace(/(<[^>]*data-i18n-fingerprint=["']([^"']+)["'][^>]*>)([^<]+)(<\/[^>]+>)/g,(e,t,n,u,a)=>{const o=r[n];if(o){0;return`${t.replace(">",` data-i18n-original="${u}" data-i18n="true">`)}${o}${a}`}return e}),u},exports.loadServerLocaleData=async function t(n,u={}){const{localeBasePath:a="./public/rustle/locales",fallback:o=!0,sourceLanguage:s="en",debug:c=!1}=u;try{const t=r.join(process.cwd(),a,`${n}.json`),u=e.readFileSync(t,"utf-8");return JSON.parse(u)}catch(i){return o&&n!==s?t(s,u):null}},exports.translateServer=function(e,r,t,n=!0){return t&&t[e]?t[e]:n?r:""};
